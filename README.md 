# Device Data Project

Это простой API-сервис на FastAPI, который принимает и анализирует данные от устройств.

## Что делает этот проект

Сервис:

- принимает данные от устройств в формате `{"x": float, "y": float, "z": float}`
- сохраняет их в базу данных (SQLite)
- по запросу считает аналитику:
  - минимум
  - максимум
  - сумму
  - количество
  - медиану
- позволяет фильтровать данные по дате
- позволяет получить список всех устройств
- поддерживает пользователей и их устройства
- позволяет получить аналитику сразу по всем устройствам пользователя

---

## Как запустить проект

1. Убедитесь, что у вас установлен Python 3.8+

2. Клонируйте репозиторий:
git clone https://github.com/fominykhpolina/device-data-service

3. Установите зависимости:
pip install fastapi uvicorn

4. Запустите сервер:
uvicorn main:app --reload

5. Перейдите в браузере:
http://127.0.0.1:8000/docs


Откроется веб-интерфейс с документацией, где можно удобно тестировать все запросы.

---

## Примеры работы API

### 1. Отправка данных с устройства

**POST /data**

```json
{
"device_id": "device1",
"x": 1.2,
"y": 3.4,
"z": 2.1
}

2. Получение статистики по устройству

GET /analysis/device1

{
  "min": 6.7,
  "max": 7.9,
  "count": 3,
  "sum": 20.4,
  "median": 6.9
}

Можно добавить параметры фильтрации по дате:
GET /analysis/device1?start=2024-01-01&end=2024-12-31

3. Список всех устройств
GET /devices

4. Регистрация пользователя и его устройств
POST /users

{
  "user_id": "polina123",
  "device_ids": ["device1", "sensorA"]
}

5. Анализ всех устройств пользователя
GET /user-analysis/polina123

{
  "device1": {
    "min": 6.7,
    "max": 7.9,
    "count": 3,
    "sum": 20.4,
    "median": 6.9
  },
  "sensorA": {
    "min": 5.2,
    "max": 6.1,
    "count": 2,
    "sum": 11.3,
    "median": 5.65
  }
}